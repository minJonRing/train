"use strict";(self.webpackChunkreact_app=self.webpackChunkreact_app||[]).push([[869],{2869:function(e,n,t){t.r(n),t.d(n,{default:function(){return I}});var r=t(9439),a=t(2791),i=t(8530),l=t(1889),u=t(7066),o=t(8907),s=t(7621),c=t(3044),d=t(9504),m=t(890),p=t(4721),h=t(2363),f=t(6151),x=t(184),g=(0,o.Pi)((function(e){var n=e.setActive,t=(0,u.Yh)().user.userInfo;return console.log(t),(0,x.jsxs)(s.Z,{variant:"outlined",children:[(0,x.jsx)(i.Z,{children:(0,x.jsx)(c.Z,{alt:"\u5934\u50cf",src:t.avatar,sx:{width:100,height:100,margin:"12px auto"}})}),(0,x.jsxs)(d.Z,{children:[(0,x.jsx)(m.Z,{gutterBottom:!0,variant:"h5",component:"div",align:"center",children:t.nick}),(0,x.jsx)(m.Z,{variant:"body2",color:"success",sx:{pb:1},align:"center",children:t.organizationName})]}),(0,x.jsx)(p.Z,{}),(0,x.jsxs)(h.Z,{children:[(0,x.jsx)(f.Z,{fullWidth:!0,size:"medium",onClick:function(){return n("info")},children:"\u57fa\u672c\u4fe1\u606f"}),(0,x.jsx)(f.Z,{fullWidth:!0,size:"medium",onClick:function(){return n("phone")},children:"\u8bc1\u4ef6\u7167"})]})]})})),j=t(2709),v=t(4973),y=t(1134),Z=t(7507),b=t(6443),q=t(3502),P=t(4254),S=function(){var e=(0,Z.KV)(),n=e.data,t=e.isLoading,u=(0,a.useState)([]),o=(0,r.Z)(u,2),c=o[0],p=o[1],h=(0,v.$A)({url:"/edu/list"}).data,g=(0,a.useState)([]),S=(0,r.Z)(g,2),C=S[0],F=S[1],I=(0,v.$A)({url:"/personnelType/list"}).data,k=(0,a.useState)([]),K=(0,r.Z)(k,2),z=(K[0],K[1]),N=(0,v.$A)({url:"/qualificationCategory/list"}).data;(0,a.useEffect)((function(){h&&p(null===h||void 0===h?void 0:h.data.map((function(e){return{id:e.eduCode,label:e.eduName}}))),I&&F(null===I||void 0===I?void 0:I.data.map((function(e){return{id:e.personnelTypeCode,label:e.personnelTypeName}}))),N&&z(null===N||void 0===N?void 0:N.data.map((function(e){return{id:e.qualificationCode,label:e.qualificationName}})))}),[h,I,N]);var W=(0,y.cI)({defaultValues:{},mode:"all",resetOptions:{keepDirtyValues:!0,keepErrors:!1}});(0,a.useEffect)((function(){n&&W.reset(n)}),[n]);return(0,x.jsx)(i.Z,{children:t?null:(0,x.jsx)(s.Z,{variant:"outlined",children:(0,x.jsx)(d.Z,{children:(0,x.jsx)(j.Yb,{formContext:W,onSuccess:function(e){return function(e){console.log(e),q.Z.current.open(),(0,v.hj)({url:"/user/update",method:"put",data:e}).then((function(e){var n=e.msg;P.N.current.open({message:n})})).finally((function(){q.Z.current.close()}))}(e)},children:(0,x.jsxs)(l.ZP,{container:!0,rowSpacing:1.5,columnSpacing:3,children:[(0,x.jsx)(l.ZP,{item:!0,xs:12,sm:12,children:(0,x.jsx)(m.Z,{sx:{pb:2},color:0==n.auditState?"#d32f2f":-1===n.auditState?"#ed6c02":"",children:0===n.auditState?n.reason:-1===n.auditState?"\u4fe1\u606f\u5ba1\u6838\u4e2d":""})}),(0,x.jsx)(l.ZP,{item:!0,xs:12,sm:6,lg:4,children:(0,x.jsx)(i.Z,{children:(0,x.jsx)(j.SF,{name:"personnelLoginUserName",label:"\u8d26\u53f7:",fullWidth:!0,disabled:!0,autoComplete:"personnelLoginUserName",placeholder:"\u8d26\u53f7",validation:b.y,size:"small"})})}),(0,x.jsx)(l.ZP,{item:!0,xs:12,sm:6,lg:4,children:(0,x.jsx)(i.Z,{children:(0,x.jsx)(j.SF,{name:"idCard",label:"\u8eab\u4efd\u8bc1\u53f7:",fullWidth:!0,disabled:!0,autoComplete:"idCard",placeholder:"\u8eab\u4efd\u8bc1\u53f7",validation:b.y,size:"small"})})}),(0,x.jsx)(l.ZP,{item:!0,xs:12,sm:6,lg:4,children:(0,x.jsx)(i.Z,{children:(0,x.jsx)(j.SF,{name:"name",label:"\u59d3\u540d:",fullWidth:!0,required:!0,autoComplete:"name",placeholder:"\u59d3\u540d",validation:b.y,size:"small",onInput:function(e){return e.target.value=e.target.value.replace(/\s/g,"")}})})}),(0,x.jsx)(l.ZP,{item:!0,xs:12,sm:6,lg:4,children:(0,x.jsx)(i.Z,{children:(0,x.jsx)(j.nj,{name:"gender",label:"\u6027\u522b:",fullWidth:!0,required:!0,autoComplete:"gender",placeholder:"\u6027\u522b",validation:b.m,size:"small",options:[{id:1,label:"\u7537"},{id:2,label:"\u5973"}]})})}),(0,x.jsx)(l.ZP,{item:!0,xs:12,sm:6,lg:4,children:(0,x.jsx)(i.Z,{children:(0,x.jsx)(j.SF,{name:"major",label:"\u4e13\u4e1a:",fullWidth:!0,required:!0,autoComplete:"major",placeholder:"\u4e13\u4e1a",validation:b.y,size:"small",onInput:function(e){return e.target.value=e.target.value.replace(/\s/g,"")}})})}),(0,x.jsx)(l.ZP,{item:!0,xs:12,sm:6,lg:4,children:(0,x.jsx)(i.Z,{children:(0,x.jsx)(j.nj,{name:"eduCode",label:"\u5b66\u5386:",fullWidth:!0,required:!0,autoComplete:"eduCode",placeholder:"\u5b66\u5386",validation:b.m,size:"small",options:c})})}),(0,x.jsx)(l.ZP,{item:!0,xs:12,sm:6,lg:4,children:(0,x.jsx)(i.Z,{children:(0,x.jsx)(j.nj,{name:"personnelTypeCode",label:"\u4eba\u5458\u7c7b\u522b:",fullWidth:!0,autoComplete:"personnelTypeCode",placeholder:"\u4eba\u5458\u7c7b\u522b",validation:b.m,size:"small",options:C})})}),(0,x.jsx)(l.ZP,{item:!0,xs:12,sm:6,lg:4,children:(0,x.jsx)(i.Z,{children:(0,x.jsx)(j.SF,{name:"unitName",label:"\u5355\u4f4d:",fullWidth:!0,autoComplete:"unitName",placeholder:"\u5355\u4f4d",validation:b.y,size:"small",onInput:function(e){return e.target.value=e.target.value.replace(/\s/g,"")}})})}),(0,x.jsx)(l.ZP,{item:!0,xs:12,sm:6,lg:4,children:(0,x.jsx)(i.Z,{children:(0,x.jsx)(j.SF,{name:"contactPhone",label:"\u8054\u7cfb\u7535\u8bdd:",fullWidth:!0,autoComplete:"contactPhone",placeholder:"\u8054\u7cfb\u7535\u8bdd",validation:b.y,size:"small",onInput:function(e){return e.target.value=e.target.value.replace(/\s/g,"")}})})}),(0,x.jsx)(l.ZP,{item:!0,xs:12,sm:6,lg:4,children:(0,x.jsx)(i.Z,{children:(0,x.jsx)(j.SF,{name:"telephone",label:"\u624b\u673a\u53f7\u7801:",fullWidth:!0,required:!0,autoComplete:"telephone",placeholder:"\u624b\u673a\u53f7\u7801",validation:b.y,size:"small",onInput:function(e){return e.target.value=e.target.value.replace(/\s/g,"")}})})}),(0,x.jsx)(l.ZP,{item:!0,xs:12,sm:6,lg:4,children:(0,x.jsx)(i.Z,{children:(0,x.jsx)(j.SF,{name:"email",label:"\u90ae\u7bb1:",fullWidth:!0,autoComplete:"email",placeholder:"\u90ae\u7bb1",validation:b.y,size:"small",onInput:function(e){return e.target.value=e.target.value.replace(/\s/g,"")}})})}),(0,x.jsx)(l.ZP,{item:!0,xs:12,sm:6,lg:4,children:(0,x.jsx)(i.Z,{children:(0,x.jsx)(j.SF,{name:"workingYear",label:"\u4ece\u4e1a\u5e74\u9650:",fullWidth:!0,required:!0,autoComplete:"workingYear",placeholder:"\u4ece\u4e1a\u5e74\u9650",validation:b.y,size:"small",onInput:function(e){return e.target.value=e.target.value.replace(/\s/g,"")}})})}),(0,x.jsx)(l.ZP,{item:!0,xs:12,sm:6,lg:4,children:(0,x.jsx)(i.Z,{children:(0,x.jsx)(j.nj,{name:"pastTrainingSituation",label:"\u8fc7\u5f80\u57f9\u8bad\u60c5\u51b5:",fullWidth:!0,required:!0,autoComplete:"pastTrainingSituation",placeholder:"\u8fc7\u5f80\u57f9\u8bad\u60c5\u51b5",validation:b.m,size:"small",options:[{id:"\u65e0",label:"\u65e0"},{id:"\u7701\u7ea7\u57f9\u8bad\u5408\u683c",label:"\u7701\u7ea7\u57f9\u8bad\u5408\u683c"},{id:"\u56fd\u5bb6",label:"\u56fd\u5bb6"}]})})}),(0,x.jsx)(l.ZP,{item:!0,xs:12,sm:6,lg:4,children:(0,x.jsx)(i.Z,{children:(0,x.jsx)(j.SF,{name:"jobPosition",label:"\u804c\u52a1:",fullWidth:!0,autoComplete:"jobPosition",placeholder:"\u804c\u52a1",validation:b.y,size:"small",onInput:function(e){return e.target.value=e.target.value.replace(/\s/g,"")}})})}),(0,x.jsx)(l.ZP,{item:!0,xs:12,sm:12,children:(0,x.jsx)(i.Z,{children:(0,x.jsx)(j.SF,{name:"address",label:"\u4f4f\u5740:",fullWidth:!0,autoComplete:"address",placeholder:"\u4f4f\u5740",validation:b.y,size:"small",onInput:function(e){return e.target.value=e.target.value.replace(/\s/g,"")}})})}),(0,x.jsx)(l.ZP,{item:!0,xs:12,sm:12,children:(0,x.jsx)(i.Z,{children:(0,x.jsx)(f.Z,{type:"submit",fullWidth:!0,disabled:1!==n.auditState,variant:"contained",sx:{mt:3,mb:2},children:-1==n.auditState?"\u7b49\u5f85\u4fe1\u606f\u5ba1\u6838\u5b8c\u6210":"\u66f4\u65b0\u7528\u6237\u4fe1\u606f"})})})]})})})})})},C=function(){var e=(0,Z.KV)().data,n=(0,a.useState)(""),t=(0,r.Z)(n,2),l=t[0],u=t[1];(0,a.useEffect)((function(){e&&u(e.avatarUrl)}),[e]);return(0,x.jsxs)(s.Z,{children:[(0,x.jsx)(d.Z,{children:(0,x.jsx)(i.Z,{children:(0,x.jsx)("img",{src:l,style:{display:"block",maxWidth:"100%",height:"200px",margin:"0 auto"}})})}),(0,x.jsx)(h.Z,{children:(0,x.jsxs)(f.Z,{fullWidth:!0,variant:"contained",component:"label",children:["\u4e00\u5bf8\u7167\u4e0a\u4f20",(0,x.jsx)("input",{hidden:!0,accept:"image/*",onChange:function(e){var n=e.target.files[0];if(n.size>10485760)P.N.current.open({message:"\u4e0a\u4f20\u7684\u56fe\u7247\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc710M\uff01",type:"warning"});else{var t=new FormData;t.append("file",n),q.Z.current.open(),(0,v.hj)({url:"/user/oneInchPhoto",method:"post",data:t}).then((function(e){var n=e.data.url;u(n),P.N.current.open({message:"\u4e00\u5bf8\u7167\u4e0a\u4f20\u6210\u529f"})})).finally((function(){q.Z.current.close()}))}},type:"file"})]})})]})},F=function(e){var n=e.active;return(0,x.jsx)(i.Z,{children:"info"===n?(0,x.jsx)(S,{}):(0,x.jsx)(C,{})})},I=function(){var e=(0,a.useState)("photo"),n=(0,r.Z)(e,2),t=n[0],u=n[1];return(0,x.jsx)(i.Z,{sx:{p:1,height:"100%",backgroundColor:"#f5f5f5"},children:(0,x.jsxs)(l.ZP,{container:!0,spacing:1,sx:{height:"calc(100% + 8px)"},children:[(0,x.jsx)(l.ZP,{item:!0,xs:12,sm:3,md:3,children:(0,x.jsx)(g,{setActive:u})}),(0,x.jsx)(l.ZP,{item:!0,xs:12,sm:9,md:9,children:(0,x.jsx)(F,{active:t})})]})})}},4973:function(e,n,t){t.d(n,{hj:function(){return d},$A:function(){return m}});var r=t(9439),a=t(1413),i=t(1912),l=t(7066),u=t(4254),o=i.Z.create({baseURL:"/learning/api",timeout:6e9});o.interceptors.request.use((function(e){return l.h.user.token&&(e.headers.token=l.h.user.token),e}),(function(e){return Promise.reject(e)})),o.interceptors.response.use((function(e){var n,t,r=e.data,a=r.size,i=r.msg,l=r.status;return a||[200].includes(l)||(null===u.N||void 0===u.N||null===(n=u.N.current)||void 0===n||n.open({message:i||"\u7f51\u7edc\u6ce2\u52a8,\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458!",type:"error"}),[401].includes(l)&&(console.log(u.N),null===u.N||void 0===u.N||null===(t=u.N.current)||void 0===t||t.logout())),r}),(function(e){return Promise.reject(e)}));var s=o,c=t(2791),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,a.Z)({method:"get",responseType:"json"},e),t=n.method,r=n.data;return["get","delete"].includes(t)&&(n.params=r),s(n)},m=function(e){var n=(0,c.useState)(""),t=(0,r.Z)(n,2),a=t[0],i=t[1],l=(0,c.useState)(!0),u=(0,r.Z)(l,2),o=u[0],s=u[1],m=(0,c.useState)(!1),p=(0,r.Z)(m,2),h=p[0],f=p[1];return o&&d(e).then((function(e){i(e)})).catch((function(e){i(e),f(!0)})).finally((function(){s(!1)})),{data:a,isLoading:o,isCatch:h}}},9599:function(e,n,t){t.d(n,{Ju:function(){return a}});var r=t(4973),a=function(e){return(0,r.hj)({url:"exam/personnel/paper/mock/getCertificateInfo",method:"get",data:e})};n.ZP={adminUrl:function(e){return(0,r.hj)({url:"/config/adminUrl",method:"get",data:e})},userInfo:function(e){return(0,r.hj)({url:"/user/me",method:"get",data:e})},userBase:function(e){return(0,r.hj)({url:"/user/detail",method:"get",data:e})},nextExam:function(e){return(0,r.hj)({url:"/examStatistic/nextSchedule",method:"get",data:e})},signTrain:function(e){return(0,r.hj)({url:"/learnStatistic/personnelCourse",method:"get"})},signExam:function(e){return(0,r.hj)({url:"/examStatistic/examScheduleCount",method:"get"})},getCertificateInfo:a,train:function(e){return(0,r.hj)({url:"/courseSign/personnel",method:"get",data:e})},trainDetail:function(e){return(0,r.hj)({url:"/courseSign/personnel/".concat(e.id),method:"get"})},trainDetailVideo:function(e){return(0,r.hj)({url:"/video/personnel/".concat(e.id,"/").concat(e.videoId),method:"get"})},trainDetailVideoUrl:function(e){return(0,r.hj)({url:"/video/playInfo/".concat(e.vid),method:"get"})},exam:function(e){return(0,r.hj)({url:"/examSign/personnel",method:"get"})},getExamPaper:function(e){return(0,r.hj)({url:"/exam/personnel/paper/mock/list/".concat(e.id),method:"get"})},getExamPaperDetail:function(e){return(0,r.hj)({url:"/exam/personnel/paper/mock/".concat(e.id),method:"get"})},getExamPaperAnswerDetail:function(e){return(0,r.hj)({url:"/exam/personnel/paper/mock/answer/".concat(e.id),method:"get"})}}},7507:function(e,n,t){t.d(n,{U0:function(){return g},TG:function(){return v},lY:function(){return j},gl:function(){return d},OU:function(){return p},_i:function(){return m},_g:function(){return h},nG:function(){return f},ZR:function(){return x},KV:function(){return c}});var r=t(1413),a=t(5987),i=t(3433),l=t(4489),u=t(9599),o=["queryFn","variables"];function s(e){var n=function(n){var t=e.queryKey;return[].concat((0,i.Z)("function"===typeof t?t():t),(0,i.Z)(n?[JSON.parse(JSON.stringify(n))]:[]))},t=function(t){var i=(0,r.Z)((0,r.Z)({},e),t),s=i.queryFn,c=i.variables,d=(0,a.Z)(i,o),m=u.ZP;return(0,l.a)((0,r.Z)({queryKey:n(c),queryFn:function(e){return s((0,r.Z)((0,r.Z)({},e),{},{apis:m,variables:c}))}},d))};return t.select=function(n){return function(a){var i=(0,r.Z)((0,r.Z)((0,r.Z)({},e),a),{},{select:n});return t(i)}},t.getKey=n,t}s({queryKey:["adminUrl"],queryFn:function(e){return e.apis.adminUrl()}}),s({queryKey:["userInfo"],queryFn:function(e){return e.apis.userInfo()}});var c=s({queryKey:["userBase"],queryFn:function(e){return e.apis.userBase()}}).select((function(e){return e.data})),d=s({queryKey:["nextExam"],queryFn:function(e){return e.apis.nextExam()}}).select((function(e){return e.data})),m=s({queryKey:["signTrain"],queryFn:function(e){return e.apis.signTrain()}}),p=s({queryKey:["signExam"],queryFn:function(e){return e.apis.signExam()}}),h=(s({queryKey:["certificateInfo"],queryFn:function(e){var n=e.apis,t=e.variables;return n.getCertificateInfo(t)}}),s({queryKey:["train"],queryFn:function(e){return e.apis.train()}})),f=s({queryKey:["trainDetail"],queryFn:function(e){var n=e.apis,t=e.variables;return n.trainDetail(t)}}),x=s({queryKey:["trainDetailVideo"],queryFn:function(e){var n=e.apis,t=e.variables;return n.trainDetailVideo(t)}}),g=(s({queryKey:["trainDetailVideoUrl"],queryFn:function(e){var n=e.apis,t=e.variables;return n.trainDetailVideoUrl(t)}}).select((function(e){var n=e.data,t=n.code,r=n.playInfo.playInfoList[0].playURL;return"".concat(r,"?MtsHlsUriToken=").concat(t)})),s({queryKey:["exam"],queryFn:function(e){return e.apis.exam()}})),j=(s({queryKey:["examPaper"],queryFn:function(e){var n=e.apis,t=e.variables;return n.getExamPaper(t)}}),s({queryKey:["examPaperDetail"],queryFn:function(e){var n=e.apis,t=e.variables;return n.getExamPaperDetail(t)}})),v=s({queryKey:["examPaperDetail"],queryFn:function(e){var n=e.apis,t=e.variables;return n.getExamPaperAnswerDetail(t)}})},6443:function(e,n,t){t.d(n,{m:function(){return a},y:function(){return r}});var r={required:"\u8bf7\u8f93\u5165"},a={required:"\u8bf7\u9009\u62e9"}}}]);
//# sourceMappingURL=869.17fdb42f.chunk.js.map